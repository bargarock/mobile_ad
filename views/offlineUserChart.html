<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <!--Script Reference[1]-->
  <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
  <script src="https://cdn.zingchart.com/zingchart.min.js"></script>
  <script src="https://cdn.zingchart.com/zingchart.jquery.min.js"></script>
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/setAdver.css">
  
</head>
<body style="margin-left: 10%; margin-right: 10%;">
	<h1><span class="glyphicon glyphicon-list" aria-hidden="true"></span>&nbsp;&nbsp;오프라인 업체</h1>
	<hr>
	<div id="chartCategoryDiv">
		<h3><span class="glyphicon glyphicon-tags" aria-hidden="true"></span>&nbsp;&nbsp;카테고리</h3>
		<div class="well center-block">
			<label class="chartCategorylabel" for="radioA1"><input type="radio" name="hospitals" checked="checked" id="hospitals" value="1"/>병원</label>
			<label class="chartCategorylabel" for="radioA2"><input type="radio" name="coffee" id="coffee" value="2"/>카페</label>
			<label class="chartCategorylabel" for="radioA3"><input type="radio" name="shops" id="shops" value="3"/>잡화</label>
			<label class="chartCategorylabel" for="radioA4"><input type="radio" name="elec" id="elec" value="4"/>전자제품</label>
		</div>
	</div>
	
	<!--Chart Placement[2]-->
	<div id="chartCategoryDiv">
		<table>
		<tr>
			<td>
				<div id="viewCntChart"></div>
				<div id="viewCntChart2" style="display:none"></div>
				<font style="font-size:10pt">※각 노드를 클릭하면 App별 Chart를 볼 수 있습니다.</font>
			</td>
			<td>
				<div id="clickCntChart"></div>
				<div id="clickCntChart2" style="display:none"></div>
				<font style="font-size:10pt">　</font>
			</td>
			<td>
				<div id="appCategory">
				<font style="color:blue">●</font> 건강관리<br/>
				<font style="color:red">●</font> 미용<br/>
				<font style="color:green">●</font> SNS
				</div>
			</td>
		</tr>
		<tr>
			<td>
				<div id="detailChart" style="visibility:hidden"></div>
			</td>
			<td>
				<div id="ratePieChart" style="visibility:hidden"></div>
			</td>
			<td>
			</td>
		</tr>
		<tr>
			<td>
			</td>
			<td colspan="3">
			
				<table id="detailTable" border="1px" style="visibility:hidden">
				<tr>
					<td colspan="7">
						상세 광고 실적 Data
					</td>
				</tr>
				<tr>
					<td>App명</td>
					<td>업체명</td>
					<td>광고 Title</td>
					<td>광고 Contents</td>
					<td>노출</td>
					<td>클릭</td>
					<td>수익</td>
				</tr>
				<tr>
					<td>헬스플러스톡</td>
					<td>강북삼성병원</td>
					<td>건강검짐</td>
					<td>11월 건강검진 특가...</td>
					<td>201</td>
					<td>120</td>
					<td>43,800원</td>
				</tr>
				<tr>
					<td>헬스플러스톡</td>
					<td>강북삼성병원</td>
					<td>치과치료</td>
					<td>지금 강북삼성병원 치과...</td>
					<td>100</td>
					<td>84</td>
					<td>21,400원</td>
				</tr>
				<tr>
					<td>헬스플러스톡</td>
					<td>강북삼성병원</td>
					<td>재방문특가</td>
					<td>다시 한번 방문해주신...</td>
					<td>100</td>
					<td>33</td>
					<td>5,600원</td>
				</tr>
				</table>
			</td>
		</tr>
		</table>
	</div>
  
<script>
  $("input[name=hospitals]").change(function() {
		document.getElementById("coffee").checked=false;
		document.getElementById("shops").checked=false;
		document.getElementById("elec").checked=false;
		
		document.getElementById("detailChart").style.visibility = "hidden";	
		document.getElementById("ratePieChart").style.visibility = "hidden";	
		document.getElementById("detailTable").style.visibility = "hidden";
		
		document.getElementById("viewCntChart").style.display = "block";	
		document.getElementById("clickCntChart").style.display = "block";	
		document.getElementById("viewCntChart2").style.display = "none";	
		document.getElementById("clickCntChart2").style.display = "none";	
		document.getElementById("appCategory").style.visibility = "visible";
  });
  
  $("input[name=coffee]").change(function() {
		document.getElementById("hospitals").checked=false;
		document.getElementById("shops").checked=false;
		document.getElementById("elec").checked=false;
		
		document.getElementById("detailChart").style.visibility = "hidden";	
		document.getElementById("ratePieChart").style.visibility = "hidden";	
		document.getElementById("detailTable").style.visibility = "hidden";
		
		document.getElementById("viewCntChart").style.display = "none";	
		document.getElementById("clickCntChart").style.display = "none";	
		document.getElementById("viewCntChart2").style.display = "block";	
		document.getElementById("clickCntChart2").style.display = "block";	
		document.getElementById("appCategory").style.visibility = "hidden";
  });
  
  $("input[name=shops]").change(function() {
		document.getElementById("hospitals").checked=false;
		document.getElementById("coffee").checked=false;
		document.getElementById("elec").checked=false;
		
		document.getElementById("detailChart").style.visibility = "hidden";	
		document.getElementById("ratePieChart").style.visibility = "hidden";	
		document.getElementById("detailTable").style.visibility = "hidden";

		document.getElementById("viewCntChart").style.display = "none";	
		document.getElementById("clickCntChart").style.display = "none";	
		document.getElementById("viewCntChart2").style.display = "block";	
		document.getElementById("clickCntChart2").style.display = "block";
		document.getElementById("appCategory").style.visibility = "hidden";
  });
  
  $("input[name=elec]").change(function() {
		document.getElementById("hospitals").checked=false;
		document.getElementById("shops").checked=false;
		document.getElementById("coffee").checked=false;
		
		document.getElementById("detailChart").style.visibility = "hidden";	
		document.getElementById("ratePieChart").style.visibility = "hidden";	
		document.getElementById("detailTable").style.visibility = "hidden";
		
		document.getElementById("viewCntChart").style.display = "none";	
		document.getElementById("clickCntChart").style.display = "none";	
		document.getElementById("viewCntChart2").style.display = "block";	
		document.getElementById("clickCntChart2").style.display = "block";
		document.getElementById("appCategory").style.visibility = "hidden";
  });
  
  $(document).ready(function() {
  $("#viewCntChart").zingchart({
    "data":{
      "type": "line",
	  "scale-x":{
      "values":"7:11:1",
      "format":"2016년 %v월"
      },
	  "scale-y":{
      "values":"0:700:100",
      "format":"%v건"
      },
	  "title": {
        "text": "광고 노출 건 수" // Adds a title to your chart
      },
      "series": [
        { "values": [300,340,391,602,651],
		  "line-color": "blue",
		  "marker": {
			"background-color": "blue"
		  }
		},
		{ "values": [121,213,172,202,254],
          "line-color": "red",
		  "marker": {
			"background-color": "red"
		  }		
		},
		{ "values": [91,118,102,154,141], 
		  "line-color": "green",
		  "marker": {
			"background-color": "green"
		  }	
		}
      ]
    },
	"height": 250,
    "width": 400
  });
  })
  
  $(document).ready(function() {
  $("#viewCntChart2").zingchart({
    "data":{
      "type": "line",
	  "scale-x":{
      "values":"7:11:1",
      "format":"2016년 %v월"
      },
	  "scale-y":{
      "values":"0:700:100",
      "format":"%v건"
      },
	  "title": {
        "text": "광고 노출 건 수" // Adds a title to your chart
      },
      "series": [
      ]
    },
	"height": 250,
    "width": 400
  });
  })
  
  $(document).ready(function() {
  $("#clickCntChart").zingchart({
    "data":{
      "type": "line",
	  "scale-x":{
      "values":"7:11:1",
      "format":"2016년 %v월"
      },
	  "scale-y":{
      "values":"0:700:100",
      "format":"%v건"
      },
	  "title": {
        "text": "광고 클릭 건 수" // Adds a title to your chart
      },
      "series": [
        { "values": [159,278,324,402,581],
		  "line-color": "blue",
		  "marker": {
			"background-color": "blue"
		  }
		},
		{ "values": [90,163,162,182,194],
          "line-color": "red",
		  "marker": {
			"background-color": "red"
		  }		
		},
		{ "values": [50,68,69,72,52], 
		  "line-color": "green",
		  "marker": {
			"background-color": "green"
		  }	
		}
      ]
    },
	"height": 250,
    "width": 400
  });
  })
  
  $(document).ready(function() {
  $("#clickCntChart2").zingchart({
    "data":{
      "type": "line",
	  "scale-x":{
      "values":"7:11:1",
      "format":"2016년 %v월"
      },
	  "scale-y":{
      "values":"0:700:100",
      "format":"%v건"
      },
	  "title": {
        "text": "광고 클릭 건 수" // Adds a title to your chart
      },
      "series": [
      ]
    },
	"height": 250,
    "width": 400
  });
  })
  $(document).ready(function() {
  $("#detailChart").zingchart({
    "data":{
      "type": "bar",
	  "legend":{
    
	  },
	  "scale-x":{
        "values":"0:1:1",
        "labels":["노출", "클릭"]
      },
	  "scale-y":{
        "format":"%v건"
      },
	  "plot": {
        "value-box": {
        "text": "%node-value"
        }
      },
      "series": [
        { "values": [401, 102],
		  "text": "헬스플러스톡" },
		{ "values": [150, 40],
		  "text": "S헬스" },
		{ "values": [101, 12],
		  "text": "서울삼성병원APP" }
      ]
    },
	"height": 250,
    "width": 400
  });
  })
  $(document).ready(function() {
  $("#ratePieChart").zingchart({
    "data":{
      "type": "pie3d",
	  "title": {
        "text": "광고 클릭 비율" // Adds a title to your chart
      },
	  "scale-r":{
        "ref-angle":270 //relative to the starting 90 degree position.
      },
	  "plot":{
        "value-box":{
          "text": "%node-value%"
        }
      },
      "series": [
        { "values":[89.25],
		  "background-color": "purple",
		  "detached":true
		},
		{ "values":[10.75],
		  "background-color": "gray"
		}
      ]
    },
	"height": 250,
    "width": 400
  });
  })
  zingchart.bind('viewCntChart','node_click', function(e) {	
	document.getElementById("detailChart").style.visibility = "visible";	
	document.getElementById("ratePieChart").style.visibility = "visible";	
	//document.getElementById("detailTable").style.visibility = "visible";
	var plotIndex = e.plotindex;
	var nodeIndex = e.nodeindex;
	var rate1 = [100];
	var rate2 = [0];
	
	var detail1 = [0,0];
	var detail2 = [0,0];
	var detail3 = [0,0];
	
	var text1 = "";
	var title = "";
	var subtitle = "2016년 " + (7+nodeIndex) + "월";
	if(plotIndex == 0) {
		title = "병원 / 건강관리";
		if(nodeIndex == 0) {
			rate1 = [53];
			rate2 = [47];
			detail1=[150, 77];
			detail2=[100, 45];
			detail3=[50, 37];
		} else if(nodeIndex == 1) {
			rate1 = [82];
			rate2 = [18];
			detail1=[169, 115];
			detail2=[100, 95];
			detail3=[71, 68];
		} else if(nodeIndex == 2) {
			rate1 = [83];
			rate2 = [17];
			detail1=[191, 145];
			detail2=[115, 95];
			detail3=[85, 74];
		} else if(nodeIndex == 3) {
			rate1 = [67];
			rate2 = [33];
			detail1=[341, 215];
			detail2=[155, 99];
			detail3=[105, 78];
		} else if(nodeIndex == 4) {
			rate1 = [89];
			rate2 = [11];
			detail1=[390, 365];
			detail2=[155, 119];
			detail3=[105, 87];
		}
		zingchart.exec('detailChart', 'setseriesdata', {
			graphid : 0,
			data : [
				{
					values : detail1,
					text : "헬스플러스톡"
				},
				{
					values : detail2,
					text : "S헬스"
				},
				{
					values : detail3,
					text : "서울삼성병원APP"
				}
			]
		});
	} else if(plotIndex == 1) {
		title = "병원 / 미용";
		text1="미미샵";
		if(nodeIndex == 0) {
			rate1 = [75];
			rate2 = [25];
			detail1=[121, 90];
		} else if(nodeIndex == 1) {
			rate1 = [77];
			rate2 = [23];
			detail1=[213, 163];
		} else if(nodeIndex == 2) {
			rate1 = [94];
			rate2 = [6];
			detail1=[172, 162];
		} else if(nodeIndex == 3) {
			rate1 = [90];
			rate2 = [10];
			detail1=[202, 182];
		} else if(nodeIndex == 4) {
			rate1 = [76];
			rate2 = [24];
			detail1=[254, 194];
		}
		zingchart.exec('detailChart', 'setseriesdata', {
			graphid : 0,
			data : [
				{
					values : detail1,
					text : text1
				}
			]
		});
	} else if(plotIndex == 2) {
		text1="카카오톡";
		title = "병원 / SNS";
		if(nodeIndex == 0) {
			rate1 = [56];
			rate2 = [44];
			detail1 = [91, 50];
		} else if(nodeIndex == 1) {
			rate1 = [58];
			rate2 = [42];
			detail1 = [118, 68];
		} else if(nodeIndex == 2) {
			rate1 = [68];
			rate2 = [32];
			detail1 = [102, 69];
		} else if(nodeIndex == 3) {
			rate1 = [47];
			rate2 = [53];
			detail1 = [154, 72];
		} else if(nodeIndex == 4) {
			rate1 = [37];
			rate2 = [63];
			detail1 = [141, 52];
		}
		zingchart.exec('detailChart', 'setseriesdata', {
			graphid : 0,
			data : [
				{
					values : detail1,
					text : text1
				}
			]
		});
		/*
			detail1=[120, 90];
		
		{ "values": [300,340,391,602,651],
		{ "values": [120,213,172,202,254],
		{ "values": [90,118,102,154,141], 
		
		{ "values": [159,278,324,402,581],
		{ "values": [90,163,162,182,194],
		{ "values": [50,68,69,72,52], 
		 */
	}
	zingchart.exec('ratePieChart', 'setseriesvalues', {
		values : [
			rate1,
			rate2
		]
	});
	zingchart.exec('detailChart', 'modify', {
		graphid : 0,
		data : {
			title : {
				text : title,
				width : 200,
                height : 30
			},
			subtitle : {
				text : subtitle
			}
		}
    });
  });
  
  zingchart.bind('clickCntChart','node_click', function(e) {	
	document.getElementById("detailChart").style.visibility = "visible";	
	document.getElementById("ratePieChart").style.visibility = "visible";	
	//document.getElementById("detailTable").style.visibility = "visible";
	var plotIndex = e.plotindex;
	var nodeIndex = e.nodeindex;
	var rate1 = [100];
	var rate2 = [0];
	
	var detail1 = [0,0];
	var detail2 = [0,0];
	var detail3 = [0,0];
	
	var text1 = "";
	var title = "";
	var subtitle = "2016년 " + (7+nodeIndex) + "월";
	if(plotIndex == 0) {
		title = "병원 / 건강관리";
		if(nodeIndex == 0) {
			rate1 = [53];
			rate2 = [47];
			detail1=[150, 77];
			detail2=[100, 45];
			detail3=[50, 37];
		} else if(nodeIndex == 1) {
			rate1 = [82];
			rate2 = [18];
			detail1=[169, 115];
			detail2=[100, 95];
			detail3=[71, 68];
		} else if(nodeIndex == 2) {
			rate1 = [83];
			rate2 = [17];
			detail1=[191, 145];
			detail2=[115, 95];
			detail3=[85, 74];
		} else if(nodeIndex == 3) {
			rate1 = [67];
			rate2 = [33];
			detail1=[341, 215];
			detail2=[155, 99];
			detail3=[105, 78];
		} else if(nodeIndex == 4) {
			rate1 = [89];
			rate2 = [11];
			detail1=[390, 365];
			detail2=[155, 119];
			detail3=[105, 87];
		}
		zingchart.exec('detailChart', 'setseriesdata', {
			graphid : 0,
			data : [
				{
					values : detail1,
					text : "헬스플러스톡"
				},
				{
					values : detail2,
					text : "S헬스"
				},
				{
					values : detail3,
					text : "서울삼성병원APP"
				}
			]
		});
	} else if(plotIndex == 1) {
		title = "병원 / 미용";
		text1="미미샵";
		if(nodeIndex == 0) {
			rate1 = [75];
			rate2 = [25];
			detail1=[121, 90];
		} else if(nodeIndex == 1) {
			rate1 = [77];
			rate2 = [23];
			detail1=[213, 163];
		} else if(nodeIndex == 2) {
			rate1 = [94];
			rate2 = [6];
			detail1=[172, 162];
		} else if(nodeIndex == 3) {
			rate1 = [90];
			rate2 = [10];
			detail1=[202, 182];
		} else if(nodeIndex == 4) {
			rate1 = [76];
			rate2 = [24];
			detail1=[254, 194];
		}
		zingchart.exec('detailChart', 'setseriesdata', {
			graphid : 0,
			data : [
				{
					values : detail1,
					text : text1
				}
			]
		});
	} else if(plotIndex == 2) {
		text1="카카오톡";
		title = "병원 / SNS";
		if(nodeIndex == 0) {
			rate1 = [56];
			rate2 = [44];
			detail1 = [91, 50];
		} else if(nodeIndex == 1) {
			rate1 = [58];
			rate2 = [42];
			detail1 = [118, 68];
		} else if(nodeIndex == 2) {
			rate1 = [68];
			rate2 = [32];
			detail1 = [102, 69];
		} else if(nodeIndex == 3) {
			rate1 = [47];
			rate2 = [53];
			detail1 = [154, 72];
		} else if(nodeIndex == 4) {
			rate1 = [37];
			rate2 = [63];
			detail1 = [141, 52];
		}
		zingchart.exec('detailChart', 'setseriesdata', {
			graphid : 0,
			data : [
				{
					values : detail1,
					text : text1
				}
			]
		});
		/*
			detail1=[120, 90];
		
		{ "values": [300,340,391,602,651],
		{ "values": [120,213,172,202,254],
		{ "values": [90,118,102,154,141], 
		
		{ "values": [159,278,324,402,581],
		{ "values": [90,163,162,182,194],
		{ "values": [50,68,69,72,52], 
		 */
	}
	zingchart.exec('ratePieChart', 'setseriesvalues', {
		values : [
			rate1,
			rate2
		]
	});
	zingchart.exec('detailChart', 'modify', {
		graphid : 0,
		data : {
			title : {
				text : title,
				width : 200,
                height : 30
			},
			subtitle : {
				text : subtitle
			}
		}
    });
  });
  </script>
</body>
</html>